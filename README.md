# word_blind_box
单词盲盒，一个辅助背单词的工具。用闯关的方式背单词，一关为15个单词，这15个单词的中文释义会随机出现，用户连续答对10个单词，则闯关成功，可以随机打开一个盲盒，获得盲盒中的卡通人物卡牌，并进入下一关。如果用户连续答对了3个单词，第4个出错了，那么连对进度条会清零，用户需要重新连续答对10个单词才能闯关成功。
### 技术栈
python<br/>
pygame<br/>
csv<br/>
### 启动方法
方法1： cd到根目录，执行`python main.py`<br/>
方法2：用IDE打开main.py文件，运行
### 背单词之前的准备
打开data目录下的words.csv文件，把要背的单词输入进去。每个单元格写一个单词，先写英文再写中文释义，英文和中文之间用空格隔开。每行写15个英文单词。
### 目录结构
│  .gitignore<br/>
│  button.py<br/>
│  game.py<br/>
│  homepage.py<br/>
│  inputbox.py<br/>
│  load_util.py<br/>
│  login.py<br/>
│  main.py<br/>
│  README.md<br/>
│  register.py<br/>
│  settings.py<br/>
│  user.py<br/>
│  \_\_init__.py<br/>
│  
├─data<br/>
│  │  user.csv<br/>
│  │  words.csv<br/>
│  │  
│  ├─audio<br/>
│  │      
│  ├─font<br/>
│  │      
│  └─image<br/>
### 各目录及文件介绍
***button.py:*** 这个文件里定义了Button类，实例化该类可以创建一个按钮对象，按钮对象包含按钮长方形的样式、位置信息以及里面的文字。按钮对象有draw和click两个方法，draw方法把按钮绘制到平面上，click方法返回布尔值，表示该按钮是否被点击了。<br/>
***game.py:*** 这个文件里定义了Game类，实例化该类可以创建一个游戏对象，它就代表一局游戏。这个对象的属性就是一局游戏需要的全部信息，包括用户信息、输入框、提交按钮、连对的单词数量等等。它对外提供的唯一方法是run，其他都是辅助方法。run方法就是一局游戏的主循环。主循环内的逻辑包括填充屏幕背景颜色、显示右上角的礼物列表、显示左上角的等级和答题进度条、根据是否为答题状态显示页面上其他内容、处理用户的键鼠事件等。如果用户在游戏进行的过程中选择退出游戏，那么会在退出之前把用户的最新信息写入user.csv文件，保存用户最新的等级以及开出来的盲盒人物个数信息。<br/>
***homepage.py:*** 定义了homepage函数。所谓的homepage，就是程序刚启动的时候显示的页面。该页面只有注册和登录两个按钮，这个函数会显示这个页面，并且根据用户点击的按钮返回常量REGISTER或者LOGIN，后续可以根据返回值来选择接下来跳转到的页面。<br/>
***inputbox.py:*** 这个文件里定义了EnChInputBox类，实例化该类会得到一个文本框对象。这个对象包括该文本框的大小、位置、已经输入到文本框内的文字内容等多个属性。文本框对象对外提供4个方法和1个属性。分别是draw,get_text,clear,switch_show和text。draw方法负责把该文本框绘制到指定的平面上，get_text方法可以处理用户的键盘输入，clear方法可以清空文本框中已经输入的文字，switch_show方法可以切换文本框内文字的明文和密文显示，text属性就是文本框里的文字字符串。这个文本框是支持输入中文的，但是我们的单词盲盒项目只需要输入英文字母。<br/>
***load_util.py:*** 这个文件里定义了三个函数。load_image函数可以根据图片的名字和尺寸加载并返回图片对象；load_font函数可以根据字体文件的名字和字号构建并返回字体对象；load_sound函数可以根据音频文件的名字和音量加载并返回音频对象。<br/>
***login.py:*** 这个文件里定义了两个函数，一个是login_check，一个是login。其中，login_check负责根据用户名和密码对登录信息进行验证，通过验证则返回一个User对象，否则返回None。login函数负责显示登录页面并处理用户登录。登录页面有用于输入用户名和密码的文本框、提交按钮以及切换到注册页面的按钮。用户输入用户名和密码并且点击提交按钮后，程序会调用login_check函数来验证登录信息。如果登录成功，login函数会返回常量PLAY和包含了该用户信息的User对象。PLAY表示仅需游戏阶段，程序显示游戏画面，用户可以背单词；如果登录失败，继续登录；如果用户点击了注册按钮，login函数返回常量REGISTER和None，REGISTER常量表示注册阶段，进入注册阶段后，程序显示注册页面，None表示没有用户对象。login函数是对外使用的，login_check函数只在login函数内部调用。<br/>
***main.py:*** 这是单词盲盒运行的入口。这个文件里创建了游戏的屏幕、时钟对象，创建了字体对象，加载了要使用的全部图片素材和音频素材，初始化游戏阶段为HOMEPAGE阶段。开启了一个无限循环，程序的几个阶段可以根据实际情况来回流转。循环内包含四个条件分支：如果游戏处于HOMEPAGE阶段，就调用homepage函数，给用户展示注册和登录两个按钮供用户选择，并根据用户的操作返回接下来的阶段常量;如果程序处于REGISTER阶段，就调用register函数，展示注册页面，根据用户的操作返回接下来的阶段常量和User对象;如果程序处于LOGIN阶段，就调用login函数，展示登录页面，根据用户的操作返回接下来的阶段常量和User对象;如果程序处于PLAY阶段，就实例化Game类，得到一个Game对象，调用该对象的run方法，让用户背单词。<br/>
***register.py:*** 这个文件里定义了两个函数：register_check和register。register_check函数根据用户名和密码判断是否是合适的注册信息，如果不合适，会返回None以及错误提示；如果合适，会把用户的信息写入user.csv文件，并返回使用这套用户名和密码构造的User对象以及空字符串。register函数负责显示注册页面并处理用户的注册。它会调用register_check函数来检验是否注册成功。如果注册成功，就返回常量PLAY和User对象，PLAY表示程序将进入背单词阶段。如果注册失败，就继续注册。如果用户点击了该页面的去登录按钮，就返回常量LOGIN和None，LOGIN表示程序将进入登录阶段。register函数是对外使用的，register_check函数只在register函数里被调用。<br/>
***settings.py:*** 该文件保存了跟整个程序相关的各种常量。包括根目录的路径、data目录的路径、image目录的路径、audio目录的路径、font目录的路径、屏幕的长和宽、程序四个阶段的常量（HOMEPAGE表示程序刚运行的主页阶段、REGISTER表示注册阶段、LOGIN表示登录阶段、PLAY表示背单词阶段）、最高等级（也就是关卡个数+1）、游戏难度（也就是连对次数）。<br/>
***user.py:*** 该文件定义了User类，实例化这个类会得到一个用户对象。一个用户对象，包括用户名、密码、等级和礼物四个属性。其中，礼物属性的值是一个字典，记录了该用户拥有的各种盲盒礼物的数量。用户对象有两个方法：upgrade方法负责更新用户的级别，在用户级别没有达到最高之前，调用该方法可以给该用户升一级；get_new_present方法可以更新指定的某种礼物的数量，在原始数量上加1.<br/>
***data目录:*** 该目录下包含words.csv和user.csv两个文件，以及audio、font和image三个子目录。words.csv是用来存储需要背的单词的，每个单元格写一个单词的英文和中文释义，英文和中文之间用空格隔开，每行写15个单词。user.csv是用来存储已经注册的用户信息的，每行存储一个用户的信息，用户信息包括用户名、密码、等级、1星卡牌的数量、2星卡牌的数量、3星卡牌的数量、4星卡牌的数量、5星卡牌的数量。星级越高，稀有度越高（也就是获得的概率越低）。<br/>
***audio目录:*** 存放所有音频文件。这个音频是在开盲盒的时候播放的背景音乐。<br/>
***font目录:*** 存放字体文件。
***image目录:*** 存放所有的图片素材。








